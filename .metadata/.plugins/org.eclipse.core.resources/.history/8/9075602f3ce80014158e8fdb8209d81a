package hu.bme.mit.rnd.sihuhu.design;

import hu.bme.mit.rnd.sihuhu.sihuhu.Rail;
import hu.bme.mit.rnd.sihuhu.sihuhu.TrackElement;

import java.util.Collection;
import java.util.Map;

import org.eclipse.emf.ecore.EObject;
import org.eclipse.sirius.tools.api.ui.IExternalJavaAction;

public class ConnectRails implements IExternalJavaAction {

	public ConnectRails() {
		System.out.println("connectRails init");
	}

	@Override
	public void execute(Collection<? extends EObject> selections,
			Map<String, Object> parameters) {
		Rail source = (Rail) parameters.get("source");
		Rail target = (Rail) parameters.get("target");
		
		System.out.println(source);
		System.out.println(target);
		
		
		Rail sourceOldTo = (Rail) source.getTo();
		sourceOldTo.setFrom(null);
		
		Rail targetOldFrom = (Rail) target.getFrom();
		targetOldFrom.setTo(null);
		
		
	}

	@Override
	public boolean canExecute(Collection<? extends EObject> selections) {
		return true;
	}

}
